<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:microcharts="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             x:Class="ProyectoFinal.Vista.SeguimientoFisicoView"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#121212"
             Title="Seguimiento FÃ­sico">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <Label Text="Tu peso actual (kg):"
                   FontSize="16"
                   TextColor="White" />

            <Entry Keyboard="Numeric"
                   Text="{Binding Peso, Mode=TwoWay}" 
                   Placeholder="Ej: 70.5" 
                   TextColor="White"
                   PlaceholderColor="#AAAAAA"
                   BackgroundColor="#1E1E1E"
                   HeightRequest="40"
                   Margin="0,0,0,10" />

            <Button Text="Guardar Progreso"
                    Command="{Binding GuardarProgresoCommand}" 
                    BackgroundColor="#00FF99"
                    TextColor="#121212"
                    FontAttributes="Bold"
                    CornerRadius="10"
                    HeightRequest="45" />

            <Label Text="Historial de Peso"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#00FF99" />

            <CollectionView ItemsSource="{Binding HistorialProgreso}"
                            BackgroundColor="Transparent">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <StackLayout Padding="5" Orientation="Horizontal" Spacing="20">
                            <Label Text="{Binding Fecha, StringFormat='{0:dd/MM/yyyy}'}"
                                   TextColor="White"
                                   FontSize="14" />
                            <Label Text="{Binding Peso, StringFormat='{0} kg'}"
                                   TextColor="White"
                                   FontSize="14" />
                        </StackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label Text="Progreso de Peso (kg)"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#00FF99"
                   HorizontalOptions="Center" />

            <!-- GRAFICO -->
            <Frame BorderColor="#333"
                   CornerRadius="15"
                   Padding="20"
                   BackgroundColor="#1E1E1E"
                   HasShadow="True">
                <microcharts:ChartView 
                    Chart="{Binding GraficoPeso}" 
                    HeightRequest="400"
                    WidthRequest="600" 
                    BackgroundColor="Transparent"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"/>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
